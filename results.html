<!DOCTYPE html>
<html lang="tr">
<head>
    <link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,700|Roboto:400,700" rel="stylesheet">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>8values Sonuçları</title>
    <style>
        :root {
            --bg: #121212;
            --card-bg: #1e1e1e;
            --text: #ffffff;
            --primary: #2196f3;
            --accent: #ffeb3b;
        }

        body {
            font-family: 'Montserrat', sans-serif;
            background-color: var(--bg);
            color: var(--text);
            margin: 0;
            padding: 20px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .container {
            max-width: 700px;
            width: 100%;
            background: var(--card-bg);
            padding: 40px;
            border-radius: 24px;
            box-shadow: 0 20px 50px rgba(0,0,0,0.5);
        }

        h1 { text-align: center; font-size: 2.5rem; margin-bottom: 5px; color: var(--text); }
        .subtitle { text-align: center; opacity: 0.6; margin-bottom: 40px; font-weight: 300; }

        h2 { 
            font-size: 1rem; 
            margin-bottom: 12px; 
            display: flex; 
            justify-content: space-between; 
            text-transform: uppercase;
            letter-spacing: 1px;
            color: #bbb;
        }

        .label-val { color: var(--primary); font-weight: 700; }

        .axis-row {
            display: flex;
            align-items: center;
            gap: 12px;
            margin-bottom: 35px;
        }

        .axis-row img {
            width: 50px;
            height: 50px;
            filter: drop-shadow(0 2px 4px rgba(0,0,0,0.3));
        }

        .bar-wrapper {
            flex-grow: 1;
            height: 30px;
            background-color: #333;
            border-radius: 15px;
            display: flex;
            overflow: hidden;
            box-shadow: inset 0 2px 10px rgba(0,0,0,0.5);
        }

        .bar {
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 800;
            font-size: 0.75rem;
            color: white;
            transition: width 1.5s cubic-bezier(0.175, 0.885, 0.32, 1.275);
        }

        /* Renkler */
        .equality { background: linear-gradient(90deg, #e53935, #f44336); }
        .wealth { background: linear-gradient(90deg, #00897b, #4db6ac); }
        .might { background: linear-gradient(90deg, #fb8c00, #ffb74d); }
        .peace { background: linear-gradient(90deg, #03a9f4, #81d4fa); }
        .liberty { background: linear-gradient(90deg, #fbc02d, #fff176); color: #222; }
        .authority { background: linear-gradient(90deg, #3949ab, #7986cb); }
        .tradition { background: linear-gradient(90deg, #7cb342, #aed581); }
        .progress { background: linear-gradient(90deg, #8e24aa, #ba68c8); }

        .ideology-box {
            text-align: center;
            background: rgba(255,255,255,0.05);
            padding: 30px;
            border-radius: 20px;
            margin-top: 20px;
            border: 1px solid rgba(255,255,255,0.1);
        }

        .ideology-box p { margin: 0; font-size: 0.9rem; opacity: 0.7; }

        #ideology-label {
            font-size: 2.2rem;
            display: block;
            color: var(--accent);
            margin-top: 10px;
            text-shadow: 0 0 15px rgba(255, 235, 59, 0.3);
        }

        .btn-group {
            display: flex;
            gap: 15px;
            margin-top: 30px;
            justify-content: center;
        }

        .button {
            padding: 15px 30px;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 700;
            transition: 0.3s;
            text-decoration: none;
            font-size: 0.9rem;
        }

        .btn-blue { background: var(--primary); color: white; box-shadow: 0 4px 15px rgba(33, 150, 243, 0.3); }
        .btn-gray { background: #333; color: #ccc; }
        .button:hover { transform: translateY(-3px); filter: brightness(1.2); }

        @media (max-width: 600px) {
            .container { padding: 20px; }
            h1 { font-size: 1.8rem; }
            #ideology-label { font-size: 1.5rem; }
            .axis-row img { width: 35px; height: 35px; }
        }
    </style>
</head>
<body>

<div class="container">
    <h1>Sonuçlar</h1>
    <p class="subtitle">Siyasi Değerler Analizi</p>

    <h2>Ekonomik: <span class="label-val" id="economic-label"></span></h2>
    <div class="axis-row">
        <img src="value_images/equality.png">
        <div class="bar-wrapper">
            <div class="bar equality" id="bar-equality"></div>
            <div class="bar wealth" id="bar-wealth"></div>
        </div>
        <img src="value_images/wealth.png">
    </div>

    <h2>Diplomatik: <span class="label-val" id="diplomatic-label"></span></h2>
    <div class="axis-row">
        <img src="value_images/might.png">
        <div class="bar-wrapper">
            <div class="bar might" id="bar-might"></div>
            <div class="bar peace" id="bar-peace"></div>
        </div>
        <img src="value_images/peace.png">
    </div>

    <h2>Sivil: <span class="label-val" id="state-label"></span></h2>
    <div class="axis-row">
        <img src="value_images/liberty.png">
        <div class="bar-wrapper">
            <div class="bar liberty" id="bar-liberty"></div>
            <div class="bar authority" id="bar-authority"></div>
        </div>
        <img src="value_images/authority.png">
    </div>

    <h2>Toplumsal: <span class="label-val" id="society-label"></span></h2>
    <div class="axis-row">
        <img src="value_images/tradition.png">
        <div class="bar-wrapper">
            <div class="bar tradition" id="bar-tradition"></div>
            <div class="bar progress" id="bar-progress"></div>
        </div>
        <img src="value_images/progress.png">
    </div>

    <div class="ideology-box">
        <p>En Yakın Görüşünüz</p>
        <strong id="ideology-label">Hesaplanıyor...</strong>
    </div>

    <div class="btn-group">
        <a href="index.html" class="button btn-gray">Başa Dön</a>
        <button class="button btn-blue" id="copyLinkBtn">Link Kopyala</button>
    </div>
</div>

<script>
    // İdeoloji Listesi (Kodun içinde gömülü)
    const ideologies = [
        {name: "Anarko-Komünizm", stats: {econ: 100, dipl: 50, govt: 100, scty: 90}},
        {name: "Sosyalizm", stats: {econ: 90, dipl: 50, govt: 50, scty: 70}},
        {name: "Sosyal Demokrasi", stats: {econ: 70, dipl: 60, govt: 60, scty: 80}},
        {name: "Liberalizm", stats: {econ: 30, dipl: 60, govt: 70, scty: 70}},
        {name: "Klasik Liberalizm", stats: {econ: 20, dipl: 50, govt: 70, scty: 60}},
        {name: "Anarko-Kapitalizm", stats: {econ: 0, dipl: 50, govt: 100, scty: 50}},
        {name: "Muhafazakarlık", stats: {econ: 30, dipl: 30, govt: 30, scty: 20}},
        {name: "Faşizm", stats: {econ: 40, dipl: 10, govt: 0, scty: 10}},
        {name: "Milliyetçilik", stats: {econ: 50, dipl: 20, govt: 30, scty: 30}},
        {name: "Komünizm", stats: {econ: 100, dipl: 70, govt: 20, scty: 80}},
        {name: "Otoriter Kapitalizm", stats: {econ: 10, dipl: 20, govt: 10, scty: 20}},
        {name: "Demokratik Sosyalizm", stats: {econ: 80, dipl: 70, govt: 70, scty: 80}}
    ];

    function getQueryVariable(variable) {
        var query = window.location.search.substring(1);
        var vars = query.split("&");
        for (var i=0;i<vars.length;i++) {
            var pair = vars[i].split("=");
            if(pair[0] == variable) return pair[1];
        }
        return 50;
    }

    function setBarValue(name, value) {
        let el = document.getElementById("bar-" + name);
        el.style.width = value + "%";
        el.innerHTML = value > 20 ? value + "%" : "";
    }

    const econArray = ["Komünist","Sosyalist","Sosyal","Ortayolcu","Piyasa","Kapitalist","Laissez-Faire"];
    const diplArray = ["Kozmopolit","Enternasyonalist","Barışçıl","Dengeli","Vatansever","Milliyetçi","Şovenist"];
    const govtArray = ["Anarşist","Liberteryen","Liberal","Ilımlı","Devletçi","Otoriter","Totaliter"];
    const sctyArray = ["Devrimci","Çok İlerici","İlerici","Yansız","Gelenekselci","Çok Gelenekselci","Tutucu"];

    function setLabel(val, ary) {
        if (val > 90) return ary[0];
        if (val > 75) return ary[1];
        if (val > 60) return ary[2];
        if (val >= 40) return ary[3];
        if (val >= 25) return ary[4];
        if (val >= 10) return ary[5];
        return ary[6];
    }

    const equality = parseFloat(getQueryVariable("e"));
    const peace    = parseFloat(getQueryVariable("d"));
    const liberty  = parseFloat(getQueryVariable("g"));
    const progress = parseFloat(getQueryVariable("s"));

    const wealth    = (100 - equality).toFixed(1);
    const might     = (100 - peace).toFixed(1);
    const authority = (100 - liberty).toFixed(1);
    const tradition = (100 - progress).toFixed(1);

    setBarValue("equality", equality);
    setBarValue("wealth", wealth);
    setBarValue("peace", peace);
    setBarValue("might", might);
    setBarValue("liberty", liberty);
    setBarValue("authority", authority);
    setBarValue("progress", progress);
    setBarValue("tradition", tradition);

    document.getElementById("economic-label").innerHTML = setLabel(equality, econArray);
    document.getElementById("diplomatic-label").innerHTML = setLabel(peace, diplArray);
    document.getElementById("state-label").innerHTML = setLabel(liberty, govtArray);
    document.getElementById("society-label").innerHTML = setLabel(progress, sctyArray);

    // İDEOLOJİ HESAPLAMA (Matematiksel en yakın mesafe)
    let ideology = "";
    let ideodist = Infinity;
    for (var i = 0; i < ideologies.length; i++) {
        let dist = 0;
        dist += Math.pow(Math.abs(ideologies[i].stats.econ - equality), 2);
        dist += Math.pow(Math.abs(ideologies[i].stats.govt - liberty), 2);
        dist += Math.pow(Math.abs(ideologies[i].stats.dipl - peace), 2);
        dist += Math.pow(Math.abs(ideologies[i].stats.scty - progress), 2);
        if (dist < ideodist) {
            ideology = ideologies[i].name;
            ideodist = dist;
        }
    }
    document.getElementById("ideology-label").innerHTML = ideology;

    document.getElementById('copyLinkBtn').addEventListener('click', function() {
        var tempInput = document.createElement('input');
        tempInput.value = window.location.href;
        document.body.appendChild(tempInput);
        tempInput.select();
        document.execCommand('copy');
        document.body.removeChild(tempInput);
        alert('Link kopyalandı!');
    });
</script>

</body>
</html>